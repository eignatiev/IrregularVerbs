#: import FadeTransition kivy.uix.screenmanager.FadeTransition

ScreenManagement:
    id: screen_manager
    transition: FadeTransition()
    StartScreen:
        name: "StartScreen"
        id: start_screen
        manager: screen_manager
    GameModeScreen:
        name: "GameModeScreen"
        id: game_mode_screen
        manager: screen_manager
    WordsChoosingScreen:
        name: "WordsChoosingScreen"
        id: words_choosing_screen
        manager: screen_manager
    GameFieldScreen:
        name: "GameFieldScreen"
        id: game_field_screen
        manager: screen_manager
    FinalScreen:
        name: "FinalScreen"
        id: final_screen
        manager: screen_manager

<BigButton@Button>:
    font_size: 14
    size_hint: (1, 0.33)

<TransButton@Button>:
    markup: True
    font_size: '16px'
    font_name: 'Roboto-Bold'
    background_color: (0, 0, 0, 0.35)
    size_hint: (1, 0.08)

<BlueBottomButton@Button>:
    markup: True
    font_size: '20px'
    font_name: 'Tahoma-Bold'
    background_normal: ''
    background_color: [34/255.0, 82/255.0, 102/255.0, 1]
    size_hint: (1, 0.1)
    pos_hint: {'center_x': 0.5, 'y': 0}

<GreenLabel>:
    height: '50sp'
    size_hint_y: None
    canvas.before:
        Color:
            rgb: 0, 102/256.0, 0
        Rectangle:
            pos: self.pos
            size: self.size

<YellowLabel>:
    height: '50sp'
    size_hint_y: None
    canvas.before:
        Color:
            rgb: 204/256.0, 204/256.0, 0
        Rectangle:
            pos: self.pos
            size: self.size

<RedLabel>:
    height: '50sp'
    size_hint_y: None
    canvas.before:
        Color:
            rgb: 255/256.0, 0, 0
        Rectangle:
            pos: self.pos
            size: self.size

<WhiteLabel>:
    height: '55sp'
    size_hint_y: None
    color: (0, 0, 0, 1)
    markup: True
    canvas.before:
        Color:
            rgb: 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
<BeigeLabel>:
    height: '55sp'
    size_hint_y: None
    color: (0, 0, 0, 1)
    markup: True
    canvas.before:
        Color:
            rgb: 255/256.0, 255/256.0, 153/256.0
        Rectangle:
            pos: self.pos
            size: self.size

<StartScreen>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'img/background.png'
    FloatLayout:
        Label:
            text: '[color=#d8d8d8]Welcome to the[/color]\n[color=98e0ef]IRREGULAR VERBS[/color]\n[color=d8d8d8]training app![/color]'
            font_size: '20px'
            font_name: 'Tahoma-Bold'
            markup: True
            halign: 'center'
            size_hint: (None, None)
            pos_hint: {'center_x': 0.5, 'center_y': 0.85}
        Label:
            text: 'Choose the game mode:'
            font_size: '16px'
            font_name: 'Tahoma-Regular'
            markup: True
            size_hint: (None, None)
            pos_hint: {'center_x': 0.5, 'center_y': 0.70}
        TransButton:
            text: '[color=#98e0ef]from RUS to ENG[/color]'
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            on_release: app.root.current = "GameModeScreen"; root.initial_preparation('rus_eng')
        TransButton:
            text: '[color=#98e0ef]from ENG to RUS[/color]'
            pos_hint: {'center_x': 0.5, 'center_y': 0.41}
            on_release: app.root.current = "GameModeScreen"; root.initial_preparation('rus_eng')

<GameModeScreen>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'img/background.png'
    FloatLayout:
        Label:
            text: '[color=98e0ef]How many words?[/color]'
            font_size: '20px'
            font_name: 'Tahoma-Bold'
            markup: True
            halign: 'center'
            size_hint: (None, None)
            pos_hint: {'center_x': 0.5, 'center_y': 0.85}
        TransButton:
            text: '[color=#98e0ef]Want to choose from the list![/color]'
            pos_hint: {'center_x': 0.5, 'center_y': 0.55}
            on_release: app.root.current = "WordsChoosingScreen"
        TransButton:
            text: '[color=#98e0ef]10 random words[/color]'
            pos_hint: {'center_x': 0.5, 'center_y': 0.465}
            on_press: app.in_game_list = root.set_words_list(10)
            on_release: app.root.current = "GameFieldScreen"
        TransButton:
            text: '[color=#98e0ef]20 random words[/color]'
            pos_hint: {'center_x': 0.5, 'center_y': 0.38}
            on_press: app.in_game_list = root.set_words_list(20)
            on_release: app.root.current = "GameFieldScreen"
        TransButton:
            text: '[color=#98e0ef]50 random words[/color]'
            pos_hint: {'center_x': 0.5, 'center_y': 0.295}
            on_press: app.in_game_list = root.set_words_list(50)
            on_release: app.root.current = "GameFieldScreen"

<WordsChoosingScreen>:
    FloatLayout:
        Label:
            text: "From:"
            size_hint: (0.5, 0.05)
            pos_hint: {"x": 0, "top": 1}
        Label:
            text: "To:"
            size_hint: (0.5, 0.05)
            pos_hint: {"x": 0.5, "top": 1}
        ScrollView:
            size_hint: (0.5, 0.85)
            pos_hint: {"x": 0, "top": 0.95}
            GridLayout:
                id: from_word
                height: self.minimum_height
                size_hint_y:  None
                cols: 1
        ScrollView:
            size_hint: (0.5, 0.85)
            pos_hint: {"x": 0.5, "top": 0.95}
            GridLayout:
                id: to_word
                height: self.minimum_height
                size_hint_y:  None
                cols: 1
        BlueBottomButton:
            id: start_button
            text: "[color=#d4dcd9][b]Let's go![/b][/color]"
            on_release:
                if root.set_words_list(root.choose_words()): app.root.current = "GameFieldScreen"; \
                app.in_game_list = root.set_words_list(root.choose_words());

<GameFieldScreen>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'img/background_dark.jpg'
    on_enter:
        root.in_game_list = app.in_game_list; root.add_items();
    FloatLayout:
        Label:
            id: cur_word
            font_size: 24
            markup: True
            size_hint: (None, None)
            pos_hint: {'center_x': 0.5, 'center_y': 0.85}
        GridLayout:
            cols: 1
            size_hint: (1, 0.5)
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            id: game_field_layout
        BlueBottomButton:
            id: next_button
            text: '[color=#d4dcd9][b]Next[/b][/color]'
            on_release: root.next_word

<FinalScreen>:
    on_enter: root.output_data()
    ScrollView:
        size_hint: (1, 0.9)
        pos_hint: {"x": 0, "top": 1}
        GridLayout:
            cols: 3
            id: final_table
            height: self.minimum_height
            size_hint_y: None
    GridLayout:
        size_hint: (1, 0.1)
        pos_hint: {"x": 0, "top": 0.1}
        cols: 2
        Button:
            text: 'Once Again'
            background_color: (0, 1, 0, 1)
            on_release: final_table.clear_widgets(); app.root.current = 'StartScreen'
        Button:
            text: 'Exit'
            background_color: (1, 0, 0, 1)
            on_release: app.stop()